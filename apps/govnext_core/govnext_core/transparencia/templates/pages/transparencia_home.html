{% extends "templates/web.html" %}

{% block title %}{{ title }}{% endblock %}

{% block header %}
<div class="hero-section bg-primary text-white py-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8">
        <h1 class="display-3 fw-bold mb-3">{{ title }}</h1>
        <p class="lead fs-4 mb-4">{{ subtitle }}</p>

        <!-- Search Bar -->
        <div class="search-container">
          <form class="d-flex" action="/transparencia/busca" method="get">
            <div class="input-group input-group-lg">
              <input type="text" class="form-control" placeholder="O que você procura?"
                     aria-label="Busca" name="q"
                     style="border-radius: 25px 0 0 25px;">
              <button class="btn btn-light px-4" type="submit"
                      style="border-radius: 0 25px 25px 0;">
                <i class="fa fa-search"></i> Buscar
              </button>
            </div>
          </form>
          <p class="mt-2 small opacity-75">Você pode buscar por receitas, dívida ativa, despesas e etc</p>
        </div>
      </div>
      <div class="col-lg-4 text-center">
        <div class="hero-stats">
          <div class="stat-card bg-white bg-opacity-10 p-3 rounded mb-2">
            <div class="text-warning"><i class="fa fa-eye fa-2x"></i></div>
            <h4 class="mb-0">Fiscalize</h4>
          </div>
          <div class="stat-card bg-white bg-opacity-10 p-3 rounded mb-2">
            <div class="text-info"><i class="fa fa-question-circle fa-2x"></i></div>
            <h4 class="mb-0">Questione</h4>
          </div>
          <div class="stat-card bg-white bg-opacity-10 p-3 rounded">
            <div class="text-success"><i class="fa fa-users fa-2x"></i></div>
            <h4 class="mb-0">Participe</h4>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="container my-5">

  <!-- Serviços mais buscados -->
  <section class="mb-5">
    <h2 class="section-title mb-4">
      <i class="fa fa-star text-warning me-2"></i>Serviços mais buscados
    </h2>
    <div class="row g-4">
      {% for servico in servicos_populares %}
      <div class="col-lg-4 col-md-6">
        <div class="service-card card h-100 border-0 shadow-sm hover-card">
          <div class="card-body p-4">
            <div class="service-icon mb-3">
              <i class="{{ servico.icone }} fa-3x text-primary"></i>
            </div>
            <h5 class="card-title fw-bold mb-3">{{ servico.titulo }}</h5>
            <p class="card-text text-muted">{{ servico.descricao }}</p>
          </div>
          <div class="card-footer bg-transparent border-0 p-4 pt-0">
            <a href="{{ servico.link }}" class="btn btn-primary btn-sm px-4">
              Acessar <i class="fa fa-arrow-right ms-2"></i>
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Mais serviços -->
  <section class="mb-5">
    <h2 class="section-title mb-4">
      <i class="fa fa-th-large text-primary me-2"></i>Mais serviços
    </h2>
    <div class="row g-3">
      {% for servico in mais_servicos %}
      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="small-service-card card h-100 border-0 shadow-sm">
          <div class="card-body p-3">
            <h6 class="card-title fw-bold mb-2">{{ servico.titulo }}</h6>
            <p class="card-text small text-muted mb-3">{{ servico.descricao }}</p>
            <a href="{{ servico.link }}" class="btn btn-outline-primary btn-sm">Acessar</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Estatísticas em destaque -->
  <section class="mb-5">
    <div class="stats-banner bg-light p-4 rounded-3">
      <h3 class="text-center mb-4">Dados Consolidados</h3>
      <div class="row g-3">
        <div class="col-lg-2 col-md-4 col-sm-6 text-center">
          <div class="stat-item">
            <h4 class="text-primary fw-bold mb-1">{{ estatisticas.orcamento_total }}</h4>
            <small class="text-muted">Orçamento Total</small>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 text-center">
          <div class="stat-item">
            <h4 class="text-success fw-bold mb-1">{{ estatisticas.receitas_total }}</h4>
            <small class="text-muted">Receitas</small>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 text-center">
          <div class="stat-item">
            <h4 class="text-danger fw-bold mb-1">{{ estatisticas.despesas_total }}</h4>
            <small class="text-muted">Despesas</small>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 text-center">
          <div class="stat-item">
            <h4 class="text-info fw-bold mb-1">{{ estatisticas.contratos_ativos }}</h4>
            <small class="text-muted">Contratos</small>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 text-center">
          <div class="stat-item">
            <h4 class="text-warning fw-bold mb-1">{{ estatisticas.licitacoes_andamento }}</h4>
            <small class="text-muted">Licitações</small>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 text-center">
          <div class="stat-item">
            <h4 class="text-secondary fw-bold mb-1">{{ estatisticas.servidores_ativos }}</h4>
            <small class="text-muted">Servidores</small>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Planejamentos -->
  <section class="mb-5">
    <h2 class="section-title mb-4">
      <i class="fa fa-chart-line text-success me-2"></i>Planejamentos
    </h2>
    <div class="row g-4">
      {% for planejamento in planejamentos %}
      <div class="col-lg-6">
        <div class="planning-card card border-0 shadow-sm">
          <div class="card-body p-4">
            <h5 class="card-title fw-bold">{{ planejamento.titulo }}</h5>
            <p class="card-text text-muted">{{ planejamento.descricao }}</p>
            <a href="{{ planejamento.link }}" class="btn btn-outline-success btn-sm">Acessar</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Você também pode estar procurando -->
  <section class="mb-5">
    <h2 class="section-title mb-4">
      <i class="fa fa-search-plus text-info me-2"></i>Você também pode estar procurando
    </h2>
    <div class="row g-3">
      {% for item in voce_pode_procurar %}
      <div class="col-lg-4 col-md-6">
        <div class="search-suggestion-card card border-0 bg-light">
          <div class="card-body p-3">
            <h6 class="card-title fw-bold mb-2">{{ item.titulo }}</h6>
            <p class="card-text small text-muted mb-3">{{ item.descricao }}</p>
            <a href="{{ item.link }}" class="btn btn-outline-info btn-sm">Acessar</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Mais do Portal da Transparência -->
  <section class="mb-5">
    <h2 class="section-title mb-4">
      <i class="fa fa-plus-circle text-secondary me-2"></i>Mais do Portal da Transparência
    </h2>
    <div class="row g-3">
      {% for item in mais_portal %}
      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="more-portal-card card border-0 shadow-sm">
          <div class="card-body p-3">
            <h6 class="card-title fw-bold mb-2">{{ item.titulo }}</h6>
            <p class="card-text small text-muted mb-3">{{ item.descricao }}</p>
            <a href="{{ item.link }}" class="btn btn-outline-secondary btn-sm">Acessar</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Atualizações Recentes -->
  <section class="mb-5">
    <h2 class="section-title mb-4">
      <i class="fa fa-clock text-warning me-2"></i>Atualizações Recentes
    </h2>
    <div class="updates-list">
      {% for atualizacao in atualizacoes_recentes %}
      <div class="update-item card border-0 shadow-sm mb-3">
        <div class="card-body p-4">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <h6 class="fw-bold mb-2">{{ atualizacao.titulo }}</h6>
              <span class="badge bg-primary">{{ atualizacao.tipo }}</span>
            </div>
            <small class="text-muted">{{ atualizacao.data }}</small>
          </div>
          <a href="{{ atualizacao.link }}" class="stretched-link"></a>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

</div>

<!-- Custom CSS -->
<style>
.hero-section {
  background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
}

.hover-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.hover-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
}

.service-icon {
  text-align: center;
}

.section-title {
  font-weight: 700;
  color: #333;
  border-bottom: 3px solid #007bff;
  padding-bottom: 10px;
  display: inline-block;
}

.stats-banner {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border: 1px solid #dee2e6;
}

.stat-item h4 {
  font-size: 1.5rem;
}

.update-item {
  border-left: 4px solid #007bff !important;
}

.small-service-card,
.planning-card,
.search-suggestion-card,
.more-portal-card {
  transition: transform 0.2s ease;
}

.small-service-card:hover,
.planning-card:hover,
.search-suggestion-card:hover,
.more-portal-card:hover {
  transform: translateY(-2px);
}

.hero-stats .stat-card {
  backdrop-filter: blur(10px);
}
</style>
{% endblock %}

{% block footer %}
<footer class="footer bg-dark text-white py-5 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 col-md-6 mb-4">
        <div class="footer-section">
          <h4 class="mb-3">
            <i class="fa fa-building me-2"></i>{{ info_institucional.nome }}
          </h4>
          <p class="mb-2">
            <i class="fa fa-map-marker-alt me-2"></i>{{ info_institucional.endereco }}
          </p>
          <p class="mb-2">
            <i class="fa fa-phone me-2"></i>{{ info_institucional.telefone }}
          </p>
          <p class="mb-0">
            <i class="fa fa-clock me-2"></i>{{ info_institucional.horario }}
          </p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6 mb-4">
        <div class="footer-section">
          <h5 class="mb-3">Links Úteis</h5>
          <ul class="list-unstyled">
            <li class="mb-2">
              <a href="/transparencia/perguntas-frequentes" class="text-white text-decoration-none">
                <i class="fa fa-question-circle me-2"></i>Perguntas Frequentes
              </a>
            </li>
            <li class="mb-2">
              <a href="/transparencia/ajuda" class="text-white text-decoration-none">
                <i class="fa fa-life-ring me-2"></i>Ajuda
              </a>
            </li>
            <li class="mb-2">
              <a href="/transparencia/ouvidoria" class="text-white text-decoration-none">
                <i class="fa fa-comment-alt me-2"></i>Ouvidoria
              </a>
            </li>
            <li class="mb-2">
              <a href="/transparencia/sic" class="text-white text-decoration-none">
                <i class="fa fa-info-circle me-2"></i>SIC
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="col-lg-4 col-md-12 mb-4">
        <div class="footer-section">
          <h5 class="mb-3">Nossas Redes</h5>
          <div class="social-links mb-4">
            <a href="#" class="text-white me-3 fs-4">
              <i class="fab fa-facebook"></i>
            </a>
            <a href="#" class="text-white me-3 fs-4">
              <i class="fab fa-youtube"></i>
            </a>
            <a href="#" class="text-white me-3 fs-4">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="text-white fs-4">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
          <div class="transparency-badge">
            <div class="badge bg-success p-2">
              <i class="fa fa-shield-alt me-2"></i>
              Portal Certificado
            </div>
          </div>
        </div>
      </div>
    </div>

    <hr class="border-light my-4">

    <div class="row align-items-center">
      <div class="col-md-6">
        <p class="mb-0">
          &copy; {{ frappe.utils.get_datetime().year }} {{ info_institucional.nome }}.
          Todos os direitos reservados.
        </p>
      </div>
      <div class="col-md-6 text-md-end">
        <small class="text-muted">
          Transparência é confiança | Dados atualizados em tempo real
        </small>
      </div>
    </div>
  </div>
</footer>
{% endblock %}
